
<html>
    
<head>
    <title>URNA DE VOTAÇÃO</title>
    <link href="https://macedotiago.github.io/urna_eletronica/style.css" rel="stylesheet"  />
    <script>
                let etapas = [
            {
                titulo: 'VEREADOR',
                numeros: 5,
                candidatos: [{
                    numero:'12345',
                    nome: 'Fulano de Tal',
                    partido: 'AAA',
                    fotos:[
                        {url:'/IMG/1cd6c8a6d36a13ba697fbc23df701150.jpg', legenda:'Vereador',}
                    ]
                },
                {
                    numero:'23456',
                    nome: 'Fulano de Tal',
                    partido: 'AAA',
                    fotos:[
                        {url:'/IMG/download (1).jpg', legenda:'Vereador',}
                    ]
                },

                ]
            },
            {
                titulo: 'PREFEITO',
                numeros: 2,
                candidatos: [{
                    numero:'44',
                    nome: 'Zoinho da Vila',
                    partido: 'BBB',
                    vice:'Chic Chic',
                    fotos:[
                        {url:'/IMG/download.png', legenda:'Prefeito',small: true},
                        {url:'/IMG/download.jpg', legenda:'Vice-Prefeito',small: true},
                    ]
                },
                {
                    numero:'99',
                    nome: 'Boquinha',
                    partido: 'QQQ',
                    vice:'Mistureba',
                    fotos:[
                        {url:'/IMG/download (1).jpg', legenda:'Prefeito', small: true},
                        {url:'/IMG/download.jpg', legenda:'Vice-Prefeito'},
                    ]
                },

                ]
            },
        ]
                

               
let seuVotoPara = document.querySelector('.d_cima_esquerda_1 span');
let cargo = document.querySelector('.d_cima_esquerda_2 span'); //COLOCAR O PONTO PARA TRAZER UMA CLASS
let descricao = document.querySelector('.d_cima_esquerda_4');
let aviso = document.querySelector('.d_baixo');
let lateralFoto = document.querySelector('.d_cima_direita');
let numerosVoto = document.querySelector('.d_cima_esquerda_3'); 
// VARIAVEIS ACIMA PARA CONTROLAR TUDO QUE TEM NA TELA DE FOTAÇÃO

//VARIAVEIS ABAIXO DE CONTROLE DE AMBIENTES PARA TRABALHAR
let etapaAtual = 0;
let preencheNumero ='';//para preenchimento dos votos
let vBranco = true;


//FUNCAO ESPECIFICA PARA COMEÇO DE ETAPAS DE FERIFICACAO DE CAMDIDATOS
// 1- ELA VAI LIMPAR A TELA
function comecarEtapa(){
    let etapa = etapas[etapaAtual];
    preencheNumero =''
    vBranco = false;
    //VARIAVEL E LOOP PARA MONTAR CINCO QUADRADOS DE NUMEROS
    let numeroHtml = '';

    for(let i=0; i<etapa.numeros;i++){
        if(i===0){
           numeroHtml += ' <div class="numeros_votos pisca"></div>';
        }else
           numeroHtml +='<div class="numeros_votos"></div>';
    }
        

    seuVotoPara.style.display = 'none';
    cargo.innerHTML = etapa.titulo;
    descricao.innerHTML = '';
    aviso.style.display = 'none';
    lateralFoto.innerHTML = '';
    numerosVoto.innerHTML = numeroHtml;
};

 ////  CODIGO GPT

 function atualizaInterface(){

    let etapa = etapas[etapaAtual];
    let candidatoAtual = etapa.candidatos.filter((item)=>{
        if (item.numero === preencheNumero ) {
            return true;
        } else {
            return false;
        }
    });
    if (candidatoAtual.length > 0) {
        candidatoAtual = candidatoAtual[0];
        seuVotoPara.style.display = 'block';
        aviso.style.display = 'block';
        descricao.innerHTML = `Nome: ${candidatoAtual.nome}<br/>Partido: ${candidatoAtual.partido}<br/>Vice: ${candidatoAtual.vice}`;

        let fotosHtml = '';
         for(let i in candidatoAtual.fotos){
            fotosHtml += `<div class="d_cima_direita"><img src="${candidatoAtual.fotos[i].url}" alt="${candidatoAtual.fotos[i].legenda}"><p>${candidatoAtual.fotos[i].legenda}</p class="stilo--foto"></div>`;
        }
          lateralFoto.innerHTML = fotosHtml;
     }else{
        seuVotoPara.style.display = 'block';
        aviso.style.display = 'block';
        descricao.innerHTML = '<div class="aviso--grande pisca">VOTO NULO</div>'
     }     
};

function clicou(n){

        let numeroPisca = document.querySelector('.numeros_votos.pisca');

        numeroPisca.innerHTML = n;
        preencheNumero = `${preencheNumero}${n}`;
        
        numeroPisca.classList.remove('pisca'); //REMOVE A ANIMÇAÕ PISCA DO NUMERO ATUAL
        if(numeroPisca.nextElementSibling !== null){
            numeroPisca.nextElementSibling.classList.add('pisca') //PASSA A ANIMAÇÃO PISCA PARA O PROXIMO NUMERO A SER DIGITADO
        } else{
            atualizaInterface();
        }
       
    
}

function branco(){
    if(preencheNumero ===''){
        vBranco = true;
        seuVotoPara.style.display = 'block';
        aviso.style.display = 'block';
        numerosVoto.innerHTML = '';
        descricao.innerHTML = '<div class="aviso--grande pisca">VOTO EM BRANCO</div>'
    }else{
        alert('ATENÇÃO Para VOTAR EM BRANCO não pode ter digitado nenhum numero aperte corrige para voltar');
    }
};

function corrige(){
    comecarEtapa();
};

function confirma(){
    let etapa = etapas[etapaAtual];

    let vConfirma = false;

    if(vBranco === true){
        vConfirma = true;
    }else if(preencheNumero.length === etapa.numeros){
        vConfirma = true;
    }
    if(vConfirma){
        etapaAtual++
        if(etapas[etapaAtual] !== undefined ){
            comecarEtapa();
        }else{
            document.querySelector('.tela').innerHTML = '<div class="aviso--gigante pisca">FIM</div>'
        }
    }
};



comecarEtapa();
    </script>
   
   
</head>
<body>
    <div class="urna">
        <div class="tela">
            <div class="d_cima">
                <div class="d_cima_esquerda">
                    <div class="d_cima_esquerda_1">
                        <span>SEU VOTO PARA</span>
                    </div>

                    <div class="d_cima_esquerda_2">
                        <span>VEREADOR</span>
                    </div>
                    <div class="d_cima_esquerda_3">
                        <div class="numeros_votos"></div>
                        <div class="numeros_votos pisca"></div>
                        
                    </div>

                    <div class="d_cima_esquerda_4">
                        NOME: <br>
                        PARTIDO <br>
                        VICE
                    </div>

                </div>

                <div class="d_cima_direita">
                    <div class="d_cima_image">
                        <img src="/IMG/1cd6c8a6d36a13ba697fbc23df701150.jpg" alt="" class="arruma">
                        Prefeito
                    </div>
                    <div class="d_cima_image small">
                        <img src="/IMG/download (1).jpg" alt="">
                        Vice-Prefeito
                    </div>
                </div>

            </div>

            <div class="d_baixo">
                Aperte a tela: <br/>
                CONFIRMA para CONFIRMAR essa VOTO<br>
                CORRIGE para REINICIAR este VOTO 
            </div>

        </div>

        <div class="teclado">
            <div class="teclado_linha">
                <div class="teclado_botao" onclick="clicou('1')">1</div>
                <div class="teclado_botao" onclick="clicou('2')">2</div>
                <div class="teclado_botao" onclick="clicou('3')">3</div>
            </div>

            <div class="teclado_linha">
                <div class="teclado_botao" onclick="clicou('4')">4</div>
                <div class="teclado_botao" onclick="clicou('5')">5</div>
                <div class="teclado_botao" onclick="clicou('6')">6</div>
            </div>

            <div class="teclado_linha">
                <div class="teclado_botao" onclick="clicou('7')">7</div>
                <div class="teclado_botao" onclick="clicou('8')">8</div>
                <div class="teclado_botao" onclick="clicou('9')">9</div>
            </div>

            <div class="teclado_linha">
                <div class="teclado_botao" onclick="clicou('0')">0</div>
            </div>

            <div class="teclado_linha">
                <div class="teclado_botao botao_branco" onclick="branco()" >BRANCO</div>
                <div class="teclado_botao botao_corrige" onclick="corrige()">CORRIGE</div>
                <div class="teclado_botao botao_confirma" onclick="confirma()">CONFIRMA</div>
            </div>

        </div>
    </div>
    
</body>
</html>
